# Worker Application Configuration

# Kafka Configuration
kafka {
  bootstrapServers = "localhost:9092"
  bootstrapServers = ${?KAFKA_BOOTSTRAP_SERVERS}
  groupId = "async-tester-workers-v3"
  groupId = ${?KAFKA_GROUP_ID}
}

# Events Configuration
events {
  workerQueueTopic = "flow-executions"
  testSuiteExecutionTopic = "test-suite-executions"
}

# Redis Configuration
redis {
  host = "localhost"
  host = ${?REDIS_HOST}
  port = 6379
  port = ${?REDIS_PORT}
  password = ${?REDIS_PASSWORD}
}

# Database Configuration (if needed for ExecutionRepository)
slick.dbs.default {
  profile = "slick.jdbc.PostgresProfile$"
  db {
    driver = "org.postgresql.Driver"
    url = "jdbc:postgresql://localhost:6432/asynctester"
    url = ${?POSTGRES_URL}
    user = "asynctester"
    user = ${?POSTGRES_USER}
    password = "asynctester"
    # password = ${?POSTGRES_PASSWORD}
    connectionPool = "HikariCP"
    maximumPoolSize = 10
    minimumIdle = 5
  }
}

# Akka Configuration
akka {
  loglevel = "INFO"
  
  actor {
    provider = "akka.actor.LocalActorRefProvider"
  }
  
  stream {
    materializer {
      initial-input-buffer-size = 4
      max-input-buffer-size = 16
    }
  }
}

sql.security {
  maxRows = 100

  allowedTables = [
    "flows"
  ]

  enforceTableRestrictions = true
}

# Logging Configuration
logger.root = INFO
logger.ab.async.tester = DEBUG
logger.akka = INFO
