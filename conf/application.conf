# This is the main configuration file for the application.
# ~~~~~
play.modules.enabled += "ab.async.tester.db.MongoDBModule"
play.modules.enabled += "ab.async.tester.cache.AppLifecycleModule"
play.modules.enabled += "ab.async.tester.cache.RedisModule"

# Enable GZIP compression
play.filters.enabled += "play.filters.gzip.GzipFilter"

# Enable custom filters
play.http.filters = "ab.async.tester.filters.Filters"

# Handle OPTIONS requests for CORS
play.filters.cors {
  pathPrefixes = ["/"]
  allowedOrigins = ["http://localhost:3000", "http://localhost:9000"]
  allowedHttpMethods = ["GET", "POST", "PUT", "DELETE", "OPTIONS"]
  allowedHttpHeaders = ["Accept", "Content-Type", "Origin", "X-Auth-Token", "Authorization"]
  preflightMaxAge = 3 days
  exposedHeaders = ["X-Total-Count"]
}

# Secret key
# ~~~~~
play.http.secret.key = "changeme"

# The application languages
# ~~~~~
play.i18n.langs = ["en"]

# Router
# ~~~~~
play.http.router = "router.Routes"

# Database configuration
# ~~~~~
mongodb {
  uri = "mongodb://localhost:27017/asynctester"
  database = "asynctester"
}

# Redis configuration
# ~~~~~
redis {
  host = "localhost"
  port = 6379
  password = ""
}

# Kafka configuration
# ~~~~~
kafka {
  brokers = "localhost:9092"
  groupId = "async-tester"
  topic = "flow-executions"
  pullTimeoutMs = 5000
}

# Server configuration
# ~~~~~
play.server {
  http.port = 9000
}

# Akka configuration
# ~~~~~
akka {
  log-dead-letters = 10
  log-dead-letters-during-shutdown = on
  loglevel = "INFO"
}

# Metrics configuration
# ~~~~~
metrics {
  enabled = true
  port = 8080
}

# Request body parser configuration
# ~~~~~
play.http.parser.maxMemoryBuffer = 10M 